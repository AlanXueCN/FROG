(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[33],{

/***/ "./imports/internalActivities/ac-h5p/ActivityRunner.js":
/*!*************************************************************!*\
  !*** ./imports/internalActivities/ac-h5p/ActivityRunner.js ***!
  \*************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.ActivityRunner = void 0;\n\nvar React = _interopRequireWildcard(__webpack_require__(/*! react */ \"../node_modules/react/index.js\"));\n\nvar _lodash = __webpack_require__(/*! lodash */ \"../node_modules/lodash/lodash.js\");\n\nvar _h5p = __webpack_require__(/*! ../../ui/App/h5p */ \"./imports/ui/App/h5p.js\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ActivityRunner =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ActivityRunner, _React$Component);\n\n  function ActivityRunner() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ActivityRunner);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ActivityRunner)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"componentDidMount\", function () {\n      if (!_this.props.activityData.config.component) {\n        return null;\n      }\n\n      (0, _h5p.H5PIframePrepare)();\n      var eventMethod = window.addEventListener ? 'addEventListener' : 'attachEvent';\n      var eventer = window[eventMethod];\n      var messageEvent = eventMethod === 'attachEvent' ? 'onmessage' : 'message';\n      eventer(messageEvent, function (e) {\n        if (e.data && e.data.type === 'h5p-log' && e.data.id === _this.props.activityData.config.component.fileId) {\n          var score = (0, _lodash.get)(e, 'data.msg.result.score.scaled');\n\n          if (score !== undefined) {\n            _this.props.dataFn.objInsert(score, 'scaledScore');\n          }\n\n          _this.props.logger({\n            type: e.data.msg.verb && e.data.msg.verb.display['en-US'] || 'h5p-xapi',\n            payload: {\n              msg: JSON.stringify(e.data.msg)\n            }\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"componentWillUnmount\", function () {});\n\n    return _this;\n  }\n\n  _createClass(ActivityRunner, [{\n    key: \"render\",\n    value: function render() {\n      if (!this.props.activityData.config.component) {\n        return null;\n      }\n\n      return React.createElement(\"div\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        }\n      }, this.props.activityData.config.prompt && React.createElement(\"h1\", null, this.props.activityData.config.prompt), React.createElement(\"iframe\", {\n        title: \"IFrame\",\n        src: '/h5p/' + this.props.activityData.config.component.fileId,\n        style: {\n          width: '100%',\n          height: '100%',\n          overflow: 'auto'\n        }\n      }));\n    }\n  }]);\n\n  return ActivityRunner;\n}(React.Component);\n\nexports.ActivityRunner = ActivityRunner;\nvar _default = ActivityRunner;\nexports.default = _default;\n\n//# sourceURL=webpack:///./imports/internalActivities/ac-h5p/ActivityRunner.js?");

/***/ }),

/***/ "./imports/ui/App/h5p.js":
/*!*******************************!*\
  !*** ./imports/ui/App/h5p.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.H5PIframePrepare = void 0;\n\n/* eslint-disable */\n// H5P iframe Resizer\nvar H5PIframePrepare = function H5PIframePrepare() {\n  if (!window.postMessage || !window.addEventListener || window.h5pResizerInitialized) {\n    return; // Not supported\n  }\n\n  window.h5pResizerInitialized = true; // Map actions to handlers\n\n  var actionHandlers = {};\n  /**\n   * Prepare iframe resize.\n   *\n   * @private\n   * @param {Object} iframe Element\n   * @param {Object} data Payload\n   * @param {Function} respond Send a response to the iframe\n   */\n\n  actionHandlers.hello = function (iframe, data, respond) {\n    // Make iframe responsive\n    iframe.style.width = '100%'; // Tell iframe that it needs to resize when our window resizes\n\n    var resize = function resize(event) {\n      if (iframe.contentWindow) {\n        // Limit resize calls to avoid flickering\n        respond('resize');\n      } else {\n        // Frame is gone, unregister.\n        window.removeEventListener('resize', resize);\n      }\n    };\n\n    window.addEventListener('resize', resize, false); // Respond to let the iframe know we can resize it\n\n    respond('hello');\n  };\n  /**\n   * Prepare iframe resize.\n   *\n   * @private\n   * @param {Object} iframe Element\n   * @param {Object} data Payload\n   * @param {Function} respond Send a response to the iframe\n   */\n\n\n  actionHandlers.prepareResize = function (iframe, data, respond) {\n    // Do not resize unless page and scrolling differs\n    if (iframe.clientHeight !== data.scrollHeight || data.scrollHeight !== data.clientHeight) {\n      // Reset iframe height, in case content has shrinked.\n      iframe.style.height = data.clientHeight + 'px';\n      respond('resizePrepared');\n    }\n  };\n  /**\n   * Resize parent and iframe to desired height.\n   *\n   * @private\n   * @param {Object} iframe Element\n   * @param {Object} data Payload\n   * @param {Function} respond Send a response to the iframe\n   */\n\n\n  actionHandlers.resize = function (iframe, data, respond) {\n    // Resize iframe so all content is visible. Use scrollHeight to make sure we get everything\n    iframe.style.height = data.scrollHeight + 'px';\n  };\n  /**\n   * Keyup event handler. Exits full screen on escape.\n   *\n   * @param {Event} event\n   */\n\n\n  var escape = function escape(event) {\n    if (event.keyCode === 27) {\n      exitFullScreen();\n    }\n  }; // Listen for messages from iframes\n\n\n  window.addEventListener('message', function (event) {\n    if (event.data.context !== 'h5p') {\n      return; // Only handle h5p requests.\n    } // Find out who sent the message\n\n\n    var iframe,\n        iframes = document.getElementsByTagName('iframe');\n\n    for (var i = 0; i < iframes.length; i++) {\n      if (iframes[i].contentWindow === event.source) {\n        iframe = iframes[i];\n        break;\n      }\n    }\n\n    if (!iframe) {\n      return; // Cannot find sender\n    } // Find action handler handler\n\n\n    if (actionHandlers[event.data.action]) {\n      actionHandlers[event.data.action](iframe, event.data, function (action, data) {\n        if (data === undefined) {\n          data = {};\n        }\n\n        data.action = action;\n        data.context = 'h5p';\n        event.source.postMessage(data, event.origin);\n      });\n    }\n  }, false); // Let h5p iframes know we're ready!\n\n  var iframes = document.getElementsByTagName('iframe');\n  var ready = {\n    context: 'h5p',\n    action: 'ready'\n  };\n\n  for (var i = 0; i < iframes.length; i++) {\n    if (iframes[i].src.indexOf('h5p') !== -1) {\n      iframes[i].contentWindow.postMessage(ready, '*');\n    }\n  }\n};\n\nexports.H5PIframePrepare = H5PIframePrepare;\n\n//# sourceURL=webpack:///./imports/ui/App/h5p.js?");

/***/ })

}]);